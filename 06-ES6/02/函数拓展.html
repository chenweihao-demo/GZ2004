<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
    </head>
    <body>
        <!-- <script>
            /* 函数默认值 */

            // es5
            // function name(x, y) {
            //     if (x === undefined) {
            //         x = x || 1;
            //     }
            //     if (y === undefined) {
            //         y = y || 2;
            //     }
            //     console.log(x, y);
            // }

            function name(x = 1, y = 2) {
                console.log(x, y);
            }
            // 可以立刻意识到哪些参数是可以省略的
            // 彻底拿掉这个参数，也不会导致以前的代码无法运行
            // 参数变量是默认声明的，所以不能用let或const再次声明
            // 参数默认值是惰性求值的

            name(5, 5);
            name(5);
            name(undefined, 5);

            name(null, 5);
            name(false, 5);
            name("", 5);
            name(" ", 5);
            name(0, 5);

            function foo({ x, y = 5 } = {}) {
                console.log(x, y);
            }

            foo(); // undefined 5
            // { x, y = 5 } = {}  空对象{}是foo函数参数的默认值
            // { x, y = 5 } 5是对象解构的默认值

            // 写法一
            function m1({ x = 0, y = 0 } = {}) {
                return [x, y];
            }
            console.log(m1());
            console.log(m1({}));

            // 写法二
            function m2({ x, y } = { x: 0, y: 0 }) {
                return [x, y];
            }
            console.log(m2());
            console.log(m2({}));

        </script> -->

        <script>
            // function f(x = 1, y) {
            //     return [x, y];
            // }

            // f(); // [1, undefined]
            // f(2); // [2, undefined]
            // f(, 1) // 报错
            // f(undefined, 1); // [1, 1]

            function f([x = 1, y] = []) {
                console.log(x, y);
            }
            f();
            f([]);
            f([5]);
            f([5, 0]);
            f([, 0]);
        </script>

        <!-- <script>
            console.log(function (a) {}.length);
            console.log(function (a, b) {}.length);
            console.log(function (a, b = 0) {}.length);

            // 函数的length属性，将返回没有指定默认值的参数个

            // 一旦设置了参数的默认值，函数进行声明初始化时，
            // 参数会形成一个单独的作用域（context）。
            // 等到初始化结束，这个作用域就会消失。（圆括号）
            // 这种语法行为，在不设置参数默认值时，是不会出现的。数

            // var x = 1;
            // function f(x, y = x) {
            //     console.log(x, y);
            // }
            // f(2); // 2
            // 圆括号 和花括号是不同作用域

            // let foo = "outer";
            // // func = () => foo

            // function bar(xxx) {
            //     let foo = "inner";
            //     console.log(xxx());
            // }

            // bar(function () {
            //     return foo;
            // }); // outer

            // 复杂临时作用域
            var x = 1;
            function foo(
                x,
                y = function () {
                    x = 2;
                }
            ) {
                var x = 3;
                y();
                console.log(x);
            }

            foo(); // 3
        </script> -->

        <script>
            /* rest参数 替代 arguments 对象 */

            let [a, ...b] = [1, 2, 3, 4, 5];
            // rest
            function add(...values) {
                console.log(values);
                values.forEach(function (element) {
                    console.log("rest", element);
                });
            }
            add(2, 5, 3);

            // 解构
            function test([a, ...values]) {
                console.log(a, values);
            }
            test([2, 5, 3]);

            function testB(a, ...values) {
                console.log("testB", a, values);
            }
            testB(2, 5, 3);

            // arguments
            function testA() {
                console.log(arguments);
                // 第一种 for
                for (var i = 0; i < arguments.length; i++) {
                    console.log("arguments", arguments[i]);
                }

                // 临时使用其他对象的某个方法
                Array.prototype.forEach.call(arguments, function (element) {
                    console.log("call", element);
                });

                // 把类数组转化为数组
                var arr = Array.prototype.slice.call(arguments);
                console.log("arr", arr);
            }
            testA(2, 5, 3);

            // call() 方法分别接受参数。
            // apply() 方法接受数组形式的参数。
            // bind()

            // func.name
            var bar = function baz() {
                console.log("xxx");
            };
        </script>
    </body>
</html>
